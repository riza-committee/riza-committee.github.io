<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>riza mirror code point demo</title>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <div id="instruction">
      <button class="closebutton" onclick="document.getElementById('instruction').style='display:none'">X - закрыть</button>
      <h2>Демонстрация riza-mirror</h2>
      <h3>Дорогие участники и читатели Doxa, вас приветствует комитет riza!</h3>
      <p>Мы занимаемся созданием цензуроустойчивой p2p сети. Эта страница демонстрирует как riza будет предоставлять доступ к заблокированным сайтам.</p>
      <p>riza-mirror позволяет предоставлять доступ к (заблокированным) сайтам через браузер без дополнительных расширений и даже без доступа к этой странице. Чтобы получить доступ к riza-mirror даже если эта страница недоступна, добавьте ссылку в закладки (на компьютере мы рекомендуем использовать браузер на основе firefox):</p>
      <a href="javascript:%28function%28%29%7Bfunction%20t%28e%29%7Bconsole.log%28e%29%2Cdv%3Ddocument.createElement%28%22div%22%29%2Ctxt%3Ddocument.createTextNode%28e%29%2Cdv.appendChild%28txt%29%2C%24%28%22%23log%22%29%5B0%5D.appendChild%28dv%29%7Dfunction%20d%28e%29%7Bfor%28peer%20of%20window.peers%29peer.connection%26%26%28t%28%22pushing%20through%20%22%2Bpeer.id%29%2Ct%28e%29%2Cpeer.connection.send%28e%29%29%7Dfunction%20r%28e%2Cn%29%7Bfor%28peer%20of%20window.peers%29peer.connection%26%26peer.subscribed.includes%28e%29%26%26%28t%28%22pushing%20through%20%28subbed%29%20%22%2Bpeer.id%29%2Cpeer.connection.send%28n%29%29%7Dfunction%20a%28e%29%7Bt%28%22subscribe%20to%20%22%2Be%29%2Cwindow.subscribed.includes%28e%29%7C%7Cwindow.subscribed.push%28e%29%2Cd%28%7Bop%3A%22subscribe%22%2Curl%3Ae%7D%29%7Dfunction%20c%28e%29%7Bfor%28url%20of%28t%28%22subscribing%20on%20new%20peer%22%29%2Cwindow.subscribed%29%29t%28url%29%2Ct%28e.connection%29%2Ce.connection.send%28%7Bop%3A%22subscribe%22%2Curl%3Aurl%7D%29%7Dfunction%20s%28e%29%7Bfor%28tracker%20of%20window.trackersInside%29e.connection.send%28%7Bop%3A%22subscribe%22%2Curl%3Atracker%7D%29%7Dfunction%20u%28e%29%7Bt%28%22using%20tracker%20%22%2Be%29%2C%24.get%28e%2C%28function%28e%2Cn%29%7Bt%28%22tracker%20status%20%22%2Bn%29%2Ct%28e%29%2Cv%28%22%22%2Ce%29%7D%29%29%7Dfunction%20l%28e%2Cn%29%7Breturn%20async%20o%3D%3E%7Bif%28t%28%22%3D%3D%3D%3D%22%29%2Ct%28o%29%2C%22update%22%3D%3Do.op%29t%28%22%3E%3E%20update%20%22%2Bo.url%29%2C%21%28i%3Dawait%20e.zero.get%28o.url%29%29%7C%7Ci.timestamp%3C%3Do.timestamp%3F%28t%28%22put%20%22%2Bo.data%29%2Ce.zero.put%28%7Burl%3Ao.url%2Ctimestamp%3Ao.timestamp%2Cdata%3Ao.data%7D%29%2Ct%28%22updated%22%29%29%3A%28t%28i%29%2Ct%28o.timestamp%29%2Ct%28%22our%20version%20is%20more%20up%20to%20date%22%29%29%3Belse%20if%28%22subscribe%22%3D%3Do.op%29%7Bif%28t%28%22%3E%3E%20subscribed%20to%20%22%2Bo.url%29%2Cn.subscribed.includes%28o.url%29%29t%28%22the%20peer%20is%20already%20subscribed%22%29%3Belse%20n.subscribed.push%28o.url%29%2C%28i%3Dawait%20e.zero.get%28o.url%29%29%3F%28t%28i%29%2Cn.connection.send%28%7Bop%3A%22update%22%2Curl%3Ai.url%2Ctimestamp%3Ai.timestamp%2Cdata%3Ai.data%7D%29%2Ct%28%22responded%22%29%29%3At%28%22not%20found%22%29%7Delse%20if%28%22receive%22%3D%3Do.op%29%7Bvar%20i%3Bt%28%22%3E%3E%20receive%20%22%2Bo.url%2B%22%20by%20%22%2Bn.id%29%2C%28i%3Dawait%20e.zero.get%28o.url%29%29%3F%28t%28i%29%2Cn.connection.send%28%7Bop%3A%22update%22%2Curl%3Ai.url%2Ctimestamp%3Ai.timestamp%2Cdata%3Ai.data%7D%29%2Ct%28%22responded%22%29%29%3At%28%22not%20found%22%29%7Delse%20t%28%22unknown%20op%22%29%2Ct%28o%29%7D%7Dfunction%20w%28%29%7Bvar%20e%3Dnew%20Peer%3Breturn%20window.peers.push%28e%29%2Ce.connection%3Dnull%2Ce.subscribed%3D%5B%5D%2Ce%7Dfunction%20m%28e%29%7Bt%28e%29%3Bvar%20n%3Dw%28%29%3Bdv%3Ddocument.createElement%28%22div%22%29%2Cn.dom%3Ddv%2Cn.on%28%22open%22%2Cfunction%28n%29%7Breturn%20o%3D%3E%7Btxt%3Ddocument.createTextNode%28o%29%2Cn.dom.appendChild%28txt%29%2Ct%28o%2B%22%20%3C-%3E%20%22%2Be%29%2Cconn%3Dn.connect%28e%29%2Cn.connection%3Dconn%2Cconn.on%28%22data%22%2Cl%28db%2Cn%29%29%2Cconn.on%28%22open%22%2C%28%28%29%3D%3E%7Bs%28n%29%2Cc%28n%29%7D%29%29%7D%7D%28n%29%29%7Dasync%20function%20b%28e%29%7Bfor%28track%20of%20window.trackersInside%29%7Bvar%20n%3Dawait%20window.db.zero.get%28track%29%3Bif%28%21n%7C%7C%22%22%3D%3Dn.data%29%7Bwindow.db.zero.put%28%7Burl%3Atrack%2Ctimestamp%3ADate.now%28%29%2Cdata%3Ae%7D%29%3Bcontinue%7Dvar%20o%3Dn.data%7C%7C%22%22%3Bt%28o%29%3Bvar%20i%3Do.split%28%22%5Cn%22%29%3Bi.indexOf%28e%29%3C0%26%26i.push%28e%29%3Blet%20d%3Di.join%28%22%5Cn%22%29%2Cr%3D%7Burl%3Atrack%2Ctimestamp%3ADate.now%28%29%2Cdata%3Ad%7D%3Bwindow.updatingTracker%3Dr%2Cwindow.db.zero.put%28r%29%7D%7Dasync%20function%20f%28e%29%7Bfor%28track%20of%20window.trackersInside%29%7Bvar%20n%3Dawait%20window.db.zero.get%28track%29%3Bif%28%21n%29continue%3Bvar%20o%3Dn.data%7C%7C%22%22%3Bt%28o%29%3Bvar%20i%3Do.split%28%22%5Cn%22%29%3Blet%20d%3Di.indexOf%28e%29%3Bd%3E%3D0%26%26i.splice%28d%2C1%29%3Blet%20r%3Di.join%28%22%5Cn%22%29%3Bwindow.db.zero.put%28%7Burl%3Atrack%2Ctimestamp%3ADate.now%28%29%2Cdata%3Ar%7D%29%7D%7Dfunction%20v%28i%2Cd%29%7Bt%28%22make%20more%20connections%22%29%2Co%3Di.split%28%22%5Cn%22%29%2Cn%3Dd.split%28%22%5Cn%22%29%2Ce%3Dwindow.peers.map%28%28e%3D%3Ee.id%29%29%2Ct%28e%29%3Bvar%20r%3D0%3Bfor%28peer%20of%20window.peers%29peer.connection%26%26%28r%2B%3D1%29%3Bvar%20a%3D%211%3Bif%28r%3C2%29%7Bvar%20c%3D%5B%5D%3Bfor%28p%20of%20n%29o.includes%28p%29%7C%7Ce.includes%28p%29%7C%7C%21p%7C%7Cc.push%28p%29%3Bif%28c.length%3E0%29%7Bpick%3Dc%5BMath.trunc%28Math.random%28%29%2Ac.length%29%5D%2Ct%28%22connecting%20to%20%22%2Bpick%29%2Cm%28pick%29%3Bvar%20s%3Dn.indexOf%28pick%29%3Bs%3E%3D0%26%26%28n.splice%28s%2C1%29%2Ca%3D%210%29%7D%7Dfor%28peer%20of%20window.peers%29n.includes%28peer.id%29%7C%7C%28n.push%28peer.id%29%2Ca%3D%210%29%3Breturn%5Bn.join%28%22%5Cn%22%29%2Ca%5D%7Dasync%20function%20h%28e%2Cn%2Co%29%7Bif%28t%28%22modified%22%29%2Cwindow.trackersInside.includes%28e%29%26%26window.updatingTracker%3D%3Do%29r%28e%2C%7Bop%3A%22update%22%2Curl%3Ae%2Ctimestamp%3Ao.timestamp%2Cdata%3Ao.data%7D%29%3Belse%7Bawait%20async%20function%28e%2Cn%29%7Bt%28%22update%20ui%20%40%20%22%2Be%29%2Ce%3D%3D%24%28%22%23editUrl%22%29.val%28%29%26%26%28t%28%22url%20matched%22%29%2Ct%28n%29%2C%24%28%22%23editText%22%29.val%28n%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3Dn%29%2Ce%3D%3Dwindow.mainUrl%26%26%28%24%28%22%23content%22%29%5B0%5D.innerHTML%3Dn%29%7D%28e%2Co.data%29%3Bvar%20i%3D%211%2Cd%3Do.data%3Bif%28window.trackersInside.includes%28e%29%29%7Bif%28console.log%28%22window%20cooldown%20%22%2Bwindow.cooldown%29%2Cnull%21%3Dwindow.cooldown%26%26window.cooldown%3EDate.now%28%29-15e3%29return%20void%20console.log%28%22%3E%3E%3E%3E%3E%3E%3E%3E%3E%20cooldown%22%29%3Bwindow.cooldown%3DDate.now%28%29%2C%5Bd%2Ci%5D%3Dv%28n.data%2Co.data%29%7Dvar%20a%3Do.timestamp%3Bi%26%26%28a%3DDate.now%28%29%29%2Cr%28e%2C%7Bop%3A%22update%22%2Curl%3Ae%2Ctimestamp%3Aa%2Cdata%3Ad%7D%29%7D%7Dasync%20function%20g%28e%29%7Bif%28t%28%22~~%20zeroChanged%20~~%22%29%2Ct%28e%29%2C%22zero%22%3D%3De.table%29if%28t%28%22zero%22%29%2C1%3D%3De.type%29%7Bt%28%22created%22%29%3Bvar%20n%3D%7Burl%3Ao%3De.obj.url%2Ctimestamp%3A0%2Cdata%3A%22%22%7D%3Bawait%20h%28o%2Cn%2Ce.obj%29%7Delse%20if%282%3D%3De.type%29%7Bt%28%22%3E%3E%20updated%22%29%3Bvar%20o%3De.obj.url%3Be.oldObj.data%21%3De.obj.data%26%26await%20h%28o%2Ce.oldObj%2Ce.obj%29%7Delse%203%3D%3De.type%3Ft%28%22deleted%22%29%3At%28%22%21unknown%20change%21%22%29%3Belse%20t%28%22unknown%20change~~%22%29%2Ct%28e%29%7Dfunction%20k%28%29%7Bfor%28n%20of%28%24%28%22%23update%22%29.click%28%28async%20function%28%29%7Bvar%20e%3D%24%28%22%23editUrl%22%29.val%28%29%3Bt%28%22update%20%22%2Be%29%3Bvar%20n%3Dawait%20db.zero.get%28e%29%3Bd%28%7Bop%3A%22receive%22%2Curl%3Ae%7D%29%2Ct%28n%29%2Cn%26%26n.data%3F%28%24%28%22%23editText%22%29.val%28n.data%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3Dn.data%29%3A%28%24%28%22%23editText%22%29.val%28%22%22%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3D%22%22%29%7D%29%29%2C%24%28%22%23subscribe%22%29.click%28%28function%28%29%7Ba%28%24%28%22%23editUrl%22%29.val%28%29%29%7D%29%29%2C%24%28%22%23editDone%22%29.click%28%28function%28%29%7Bvar%20e%3D%24%28%22%23editUrl%22%29.val%28%29%2Cn%3D%24%28%22%23editText%22%29.val%28%29%3Bt%28%22edit%20%22%2Be%29%2Ct%28n%29%2Cdb.zero.put%28%7Burl%3Ae%2Ctimestamp%3ADate.now%28%29%2Cdata%3An%7D%29%2Ct%28%22%23editDone%22%29%7D%29%29%2C%24%28%22%23push%22%29.click%28%28function%28%29%7Bvar%20e%3D%24%28%22%23editUrl%22%29.val%28%29%2Cn%3D%24%28%22%23editText%22%29.val%28%29%3Bt%28%22push%20%22%2Be%29%3Bvar%20o%3DDate.now%28%29%3Bdb.zero.put%28%7Burl%3Ae%2Ctimestamp%3Ao%2Cdata%3An%7D%29%2Cd%28%7Bop%3A%22update%22%2Curl%3Ae%2Ctimestamp%3Ao%2Cdata%3An%7D%29%7D%29%29%2C%5B%22connections%22%2C%22peers%22%2C%22log%22%2C%22db%22%2C%22underhood%22%5D%29%29%24%28%22%23%22%2Bn%2B%22Button%22%29.click%28function%28e%29%7Breturn%28%29%3D%3E%7Bvar%20n%3D%24%28%22%23%22%2Be%29%5B0%5D%3B%22none%22%3D%3Dn.style.display%3Fn.style.display%3D%22block%22%3An.style.display%3D%22none%22%7D%7D%28n%29%29%3B%24%28%22%23connectToPeer%22%29.click%28%28%28%29%3D%3E%7Bt%28%22connect%22%29%2Cm%28%24%28%22%23remotePeer%22%29.val%28%29%29%7D%29%29%2Ca%28window.mainUrl%29%7Dfunction%20x%28e%2Cn%29%7Bvar%20t%3Ddocument.createElement%28%22script%22%29%3Bt.src%3De%2Ct.onload%3Dn%2Cdocument.documentElement.getElementsByTagName%28%22head%22%29%5B0%5D.appendChild%28t%29%7Dwindow.rawjsInitInterface%3D%28%29%3D%3E%7Bwindow.notificationEnabled%3D%211%2Cwindow.postNodes%3D%7B%7D%2Cwindow.mainUrl%3D%22https%3A//news.doxajournal.ru%22%2Cwindow.trackersReadOnly%3D%5B%22https%3A//zeronet.kaef.top/1EQ6gh2eV2crfxEGzmxMk8DHxULuSYyh4N/conns.txt%22%5D%2Cwindow.trackersInside%3D%5B%22/1EQ6gh2eV2crfxEGzmxMk8DHxULuSYyh4N/conns.txt%22%5D%2Cwindow.subscribed%3D%5B%5D%3Bvar%20e%3Dnew%20Dexie%28%22riza%22%29%3Be.version%282%29.stores%28%7Bzero%3A%22url%2C%20timestamp%2C%20data%22%7D%29%2Ce.version%285%29.stores%28%7B%7D%29%2Cwindow.db%3De%2Ce.open%28%29%2Ce.on%28%22changes%22%2C%28async%20e%3D%3E%7Bfor%28var%20n%20of%28t%28%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%22%29%2Ct%28%22CHANGES%22%29%2Ct%28e%29%2Ce%29%29await%20g%28n%29%7D%29%29%2Cwindow.peers%3D%5B%5D%3Bvar%20n%3D%24%28%22%23connectionList%22%29%5B0%5D%3Bfor%28n.innerHTML%3D%22%22%2Ci%3D0%3Bi%3C8%3B%2B%2Bi%29%7Bvar%20o%3Dw%28%29%3Bo.on%28%22open%22%2Cfunction%28e%29%7Breturn%20o%3D%3E%7Bt%28o%29%2Cdv%3Ddocument.createElement%28%22div%22%29%2Ctxt%3Ddocument.createTextNode%28o%29%2Cdv.appendChild%28txt%29%2Cn.appendChild%28dv%29%2Ce.dom%3Ddv%2Cb%28o%29%7D%7D%28o%29%29%2Co.on%28%22connection%22%2Cfunction%28n%29%7Breturn%20async%20o%3D%3E%7Bt%28o%29%2Co.on%28%22data%22%2Cl%28e%2Cn%29%29%2Cn.connection%3Do%2Cn.dom.remove%28%29%2C%24%28%22%23peerList%22%29%5B0%5D.appendChild%28n.dom%29%2Cf%28n.id%29%2Cs%28n%29%2Cc%28n%29%7D%7D%28o%29%29%7Dfor%28tracker%20of%20window.trackersInside%29a%28tracker%29%3Bfor%28tracker%20of%20window.trackersReadOnly%29u%28tracker%29%3Bk%28%29%7D%2Cwindow.buildBasicDom%3D%28%29%3D%3E%7Bx%28%22https%3A//code.jquery.com/jquery-3.6.0.min.js%22%2C%28%28%29%3D%3E%7Bconsole.log%28%22loaded%20query%22%29%2Cx%28%22https%3A//unpkg.com/peerjs%401.3.2/dist/peerjs.min.js%22%2C%28%28%29%3D%3E%7Bconsole.log%28%22loaded%20peerjs%22%29%2Cx%28%22https%3A//unpkg.com/dexie%403.2.1/dist/dexie.min.js%22%2C%28%28%29%3D%3E%7Bconsole.log%28%22loaded%20dexi%22%29%2Cx%28%22https%3A//unpkg.com/dexie-observable%403.0.0-beta.11/dist/dexie-observable.min.js%22%2Cwindow.afterDom%29%7D%29%29%7D%29%29%7D%29%29%2C%28window.rizaMirrorKeep%3Fdocument.getElementById%28%22riza-mirror%22%29%3Adocument.getElementsByTagName%28%22body%22%29%5B0%5D%29.innerHTML%3D%27%5Cn%20%20%20%20%3Cdiv%20id%3D%22header%22%20style%3D%22width%3A100%25%3Bposition%3Afixed%3Bz-index%3A999%3Bbackground-color%3A%23000C%3B%22%3E%3Ch1%3Econtent%20below%20is%20a%20mirror%20delivered%20through%20peer%20to%20peer%20network%3C/h1%3E%3C/div%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22content%22%3E%3C/div%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22underhood%22%20style%3D%22display%3A%20none%3B%22%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22connectionsButton%22%3Eopen%20connections%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22connections%22%3E%5Cn%20%20%20%20%20%20copy%20connection%20id%20%26amp%3B%20send%20it%20to%20your%20friends%5Cn%20%20%20%20%20%20%3Cdiv%20id%3D%22connectionList%22%3E%3C/div%3E%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22peersButton%22%3Epeers%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22peers%22%3E%5Cn%20%20%20%20%20%20peer%20list%20go%20here%5Cn%20%20%20%20%20%20%3Cdiv%20id%3D%22peerList%22%3E%3C/div%3E%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22logButton%22%3Elog%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22log%22%3E%5Cn%20%20%20%20%20%20connection%20log%20goes%20here%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22dbButton%22%3Edb%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22db%22%3E%5Cn%20%20%20%20%20%20db%20goes%20here%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cinput%20id%3D%22remotePeer%22%20type%3D%22text%22/%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22connectToPeer%22%3Econnect%3C/button%3E%5Cn%20%20%20%20%3Cinput%20id%3D%22editUrl%22%20type%3D%22text%22/%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22update%22%3Eload%3C/button%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22subscribe%22%3Esubscribe%3C/button%3E%5Cn%20%20%20%20%3Ctextarea%20id%3D%22editText%22%3E%3C/textarea%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22editDone%22%3Eupdate%3C/button%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22push%22%3Epush%3C/button%3E%5Cn%20%20%20%20%3C/div%3E%5Cn%27%2Cdocument.title%3D%22riza-mirror%22%7D%2Cwindow.onload%3D%28%29%3D%3E%7Bconsole.log%28%22helloworld%22%29%2Cwindow.buildBasicDom%28%29%7D%2Cwindow.afterDom%3D%28%29%3D%3E%7BrawjsInitInterface%28%29%2Ct%28%22inited%22%29%2Cwindow.db.zero.get%28window.mainUrl%29.then%28%28e%3D%3E%7Bt%28%22setting%20innerHTML%22%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3De.data%7D%29%29%2Ct%28%22onload%20finished%21%22%29%7D%2Cwindow.onload%28%29%7D%29%28%29%3B%0A" id="link">[ссылка]</a>
      <p>Если вы не можете создать закладку по этой ссылке (например, в мобильном браузере), создайте новую закладку и отредактируйте её, заменив url/адрес на текст из окошка:</p>
      <a href="javascript:(function(){var l=document.getElementById('link');navigator.clipboard.writeText(l.href)})()">click me to copy link to clipboard</a>
      <textarea class="copypaste">javascript:%28function%28%29%7Bfunction%20t%28e%29%7Bconsole.log%28e%29%2Cdv%3Ddocument.createElement%28%22div%22%29%2Ctxt%3Ddocument.createTextNode%28e%29%2Cdv.appendChild%28txt%29%2C%24%28%22%23log%22%29%5B0%5D.appendChild%28dv%29%7Dfunction%20d%28e%29%7Bfor%28peer%20of%20window.peers%29peer.connection%26%26%28t%28%22pushing%20through%20%22%2Bpeer.id%29%2Ct%28e%29%2Cpeer.connection.send%28e%29%29%7Dfunction%20r%28e%2Cn%29%7Bfor%28peer%20of%20window.peers%29peer.connection%26%26peer.subscribed.includes%28e%29%26%26%28t%28%22pushing%20through%20%28subbed%29%20%22%2Bpeer.id%29%2Cpeer.connection.send%28n%29%29%7Dfunction%20a%28e%29%7Bt%28%22subscribe%20to%20%22%2Be%29%2Cwindow.subscribed.includes%28e%29%7C%7Cwindow.subscribed.push%28e%29%2Cd%28%7Bop%3A%22subscribe%22%2Curl%3Ae%7D%29%7Dfunction%20c%28e%29%7Bfor%28url%20of%28t%28%22subscribing%20on%20new%20peer%22%29%2Cwindow.subscribed%29%29t%28url%29%2Ct%28e.connection%29%2Ce.connection.send%28%7Bop%3A%22subscribe%22%2Curl%3Aurl%7D%29%7Dfunction%20s%28e%29%7Bfor%28tracker%20of%20window.trackersInside%29e.connection.send%28%7Bop%3A%22subscribe%22%2Curl%3Atracker%7D%29%7Dfunction%20u%28e%29%7Bt%28%22using%20tracker%20%22%2Be%29%2C%24.get%28e%2C%28function%28e%2Cn%29%7Bt%28%22tracker%20status%20%22%2Bn%29%2Ct%28e%29%2Cv%28%22%22%2Ce%29%7D%29%29%7Dfunction%20l%28e%2Cn%29%7Breturn%20async%20o%3D%3E%7Bif%28t%28%22%3D%3D%3D%3D%22%29%2Ct%28o%29%2C%22update%22%3D%3Do.op%29t%28%22%3E%3E%20update%20%22%2Bo.url%29%2C%21%28i%3Dawait%20e.zero.get%28o.url%29%29%7C%7Ci.timestamp%3C%3Do.timestamp%3F%28t%28%22put%20%22%2Bo.data%29%2Ce.zero.put%28%7Burl%3Ao.url%2Ctimestamp%3Ao.timestamp%2Cdata%3Ao.data%7D%29%2Ct%28%22updated%22%29%29%3A%28t%28i%29%2Ct%28o.timestamp%29%2Ct%28%22our%20version%20is%20more%20up%20to%20date%22%29%29%3Belse%20if%28%22subscribe%22%3D%3Do.op%29%7Bif%28t%28%22%3E%3E%20subscribed%20to%20%22%2Bo.url%29%2Cn.subscribed.includes%28o.url%29%29t%28%22the%20peer%20is%20already%20subscribed%22%29%3Belse%20n.subscribed.push%28o.url%29%2C%28i%3Dawait%20e.zero.get%28o.url%29%29%3F%28t%28i%29%2Cn.connection.send%28%7Bop%3A%22update%22%2Curl%3Ai.url%2Ctimestamp%3Ai.timestamp%2Cdata%3Ai.data%7D%29%2Ct%28%22responded%22%29%29%3At%28%22not%20found%22%29%7Delse%20if%28%22receive%22%3D%3Do.op%29%7Bvar%20i%3Bt%28%22%3E%3E%20receive%20%22%2Bo.url%2B%22%20by%20%22%2Bn.id%29%2C%28i%3Dawait%20e.zero.get%28o.url%29%29%3F%28t%28i%29%2Cn.connection.send%28%7Bop%3A%22update%22%2Curl%3Ai.url%2Ctimestamp%3Ai.timestamp%2Cdata%3Ai.data%7D%29%2Ct%28%22responded%22%29%29%3At%28%22not%20found%22%29%7Delse%20t%28%22unknown%20op%22%29%2Ct%28o%29%7D%7Dfunction%20w%28%29%7Bvar%20e%3Dnew%20Peer%3Breturn%20window.peers.push%28e%29%2Ce.connection%3Dnull%2Ce.subscribed%3D%5B%5D%2Ce%7Dfunction%20m%28e%29%7Bt%28e%29%3Bvar%20n%3Dw%28%29%3Bdv%3Ddocument.createElement%28%22div%22%29%2Cn.dom%3Ddv%2Cn.on%28%22open%22%2Cfunction%28n%29%7Breturn%20o%3D%3E%7Btxt%3Ddocument.createTextNode%28o%29%2Cn.dom.appendChild%28txt%29%2Ct%28o%2B%22%20%3C-%3E%20%22%2Be%29%2Cconn%3Dn.connect%28e%29%2Cn.connection%3Dconn%2Cconn.on%28%22data%22%2Cl%28db%2Cn%29%29%2Cconn.on%28%22open%22%2C%28%28%29%3D%3E%7Bs%28n%29%2Cc%28n%29%7D%29%29%7D%7D%28n%29%29%7Dasync%20function%20b%28e%29%7Bfor%28track%20of%20window.trackersInside%29%7Bvar%20n%3Dawait%20window.db.zero.get%28track%29%3Bif%28%21n%7C%7C%22%22%3D%3Dn.data%29%7Bwindow.db.zero.put%28%7Burl%3Atrack%2Ctimestamp%3ADate.now%28%29%2Cdata%3Ae%7D%29%3Bcontinue%7Dvar%20o%3Dn.data%7C%7C%22%22%3Bt%28o%29%3Bvar%20i%3Do.split%28%22%5Cn%22%29%3Bi.indexOf%28e%29%3C0%26%26i.push%28e%29%3Blet%20d%3Di.join%28%22%5Cn%22%29%2Cr%3D%7Burl%3Atrack%2Ctimestamp%3ADate.now%28%29%2Cdata%3Ad%7D%3Bwindow.updatingTracker%3Dr%2Cwindow.db.zero.put%28r%29%7D%7Dasync%20function%20f%28e%29%7Bfor%28track%20of%20window.trackersInside%29%7Bvar%20n%3Dawait%20window.db.zero.get%28track%29%3Bif%28%21n%29continue%3Bvar%20o%3Dn.data%7C%7C%22%22%3Bt%28o%29%3Bvar%20i%3Do.split%28%22%5Cn%22%29%3Blet%20d%3Di.indexOf%28e%29%3Bd%3E%3D0%26%26i.splice%28d%2C1%29%3Blet%20r%3Di.join%28%22%5Cn%22%29%3Bwindow.db.zero.put%28%7Burl%3Atrack%2Ctimestamp%3ADate.now%28%29%2Cdata%3Ar%7D%29%7D%7Dfunction%20v%28i%2Cd%29%7Bt%28%22make%20more%20connections%22%29%2Co%3Di.split%28%22%5Cn%22%29%2Cn%3Dd.split%28%22%5Cn%22%29%2Ce%3Dwindow.peers.map%28%28e%3D%3Ee.id%29%29%2Ct%28e%29%3Bvar%20r%3D0%3Bfor%28peer%20of%20window.peers%29peer.connection%26%26%28r%2B%3D1%29%3Bvar%20a%3D%211%3Bif%28r%3C2%29%7Bvar%20c%3D%5B%5D%3Bfor%28p%20of%20n%29o.includes%28p%29%7C%7Ce.includes%28p%29%7C%7C%21p%7C%7Cc.push%28p%29%3Bif%28c.length%3E0%29%7Bpick%3Dc%5BMath.trunc%28Math.random%28%29%2Ac.length%29%5D%2Ct%28%22connecting%20to%20%22%2Bpick%29%2Cm%28pick%29%3Bvar%20s%3Dn.indexOf%28pick%29%3Bs%3E%3D0%26%26%28n.splice%28s%2C1%29%2Ca%3D%210%29%7D%7Dfor%28peer%20of%20window.peers%29n.includes%28peer.id%29%7C%7C%28n.push%28peer.id%29%2Ca%3D%210%29%3Breturn%5Bn.join%28%22%5Cn%22%29%2Ca%5D%7Dasync%20function%20h%28e%2Cn%2Co%29%7Bif%28t%28%22modified%22%29%2Cwindow.trackersInside.includes%28e%29%26%26window.updatingTracker%3D%3Do%29r%28e%2C%7Bop%3A%22update%22%2Curl%3Ae%2Ctimestamp%3Ao.timestamp%2Cdata%3Ao.data%7D%29%3Belse%7Bawait%20async%20function%28e%2Cn%29%7Bt%28%22update%20ui%20%40%20%22%2Be%29%2Ce%3D%3D%24%28%22%23editUrl%22%29.val%28%29%26%26%28t%28%22url%20matched%22%29%2Ct%28n%29%2C%24%28%22%23editText%22%29.val%28n%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3Dn%29%2Ce%3D%3Dwindow.mainUrl%26%26%28%24%28%22%23content%22%29%5B0%5D.innerHTML%3Dn%29%7D%28e%2Co.data%29%3Bvar%20i%3D%211%2Cd%3Do.data%3Bif%28window.trackersInside.includes%28e%29%29%7Bif%28console.log%28%22window%20cooldown%20%22%2Bwindow.cooldown%29%2Cnull%21%3Dwindow.cooldown%26%26window.cooldown%3EDate.now%28%29-15e3%29return%20void%20console.log%28%22%3E%3E%3E%3E%3E%3E%3E%3E%3E%20cooldown%22%29%3Bwindow.cooldown%3DDate.now%28%29%2C%5Bd%2Ci%5D%3Dv%28n.data%2Co.data%29%7Dvar%20a%3Do.timestamp%3Bi%26%26%28a%3DDate.now%28%29%29%2Cr%28e%2C%7Bop%3A%22update%22%2Curl%3Ae%2Ctimestamp%3Aa%2Cdata%3Ad%7D%29%7D%7Dasync%20function%20g%28e%29%7Bif%28t%28%22~~%20zeroChanged%20~~%22%29%2Ct%28e%29%2C%22zero%22%3D%3De.table%29if%28t%28%22zero%22%29%2C1%3D%3De.type%29%7Bt%28%22created%22%29%3Bvar%20n%3D%7Burl%3Ao%3De.obj.url%2Ctimestamp%3A0%2Cdata%3A%22%22%7D%3Bawait%20h%28o%2Cn%2Ce.obj%29%7Delse%20if%282%3D%3De.type%29%7Bt%28%22%3E%3E%20updated%22%29%3Bvar%20o%3De.obj.url%3Be.oldObj.data%21%3De.obj.data%26%26await%20h%28o%2Ce.oldObj%2Ce.obj%29%7Delse%203%3D%3De.type%3Ft%28%22deleted%22%29%3At%28%22%21unknown%20change%21%22%29%3Belse%20t%28%22unknown%20change~~%22%29%2Ct%28e%29%7Dfunction%20k%28%29%7Bfor%28n%20of%28%24%28%22%23update%22%29.click%28%28async%20function%28%29%7Bvar%20e%3D%24%28%22%23editUrl%22%29.val%28%29%3Bt%28%22update%20%22%2Be%29%3Bvar%20n%3Dawait%20db.zero.get%28e%29%3Bd%28%7Bop%3A%22receive%22%2Curl%3Ae%7D%29%2Ct%28n%29%2Cn%26%26n.data%3F%28%24%28%22%23editText%22%29.val%28n.data%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3Dn.data%29%3A%28%24%28%22%23editText%22%29.val%28%22%22%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3D%22%22%29%7D%29%29%2C%24%28%22%23subscribe%22%29.click%28%28function%28%29%7Ba%28%24%28%22%23editUrl%22%29.val%28%29%29%7D%29%29%2C%24%28%22%23editDone%22%29.click%28%28function%28%29%7Bvar%20e%3D%24%28%22%23editUrl%22%29.val%28%29%2Cn%3D%24%28%22%23editText%22%29.val%28%29%3Bt%28%22edit%20%22%2Be%29%2Ct%28n%29%2Cdb.zero.put%28%7Burl%3Ae%2Ctimestamp%3ADate.now%28%29%2Cdata%3An%7D%29%2Ct%28%22%23editDone%22%29%7D%29%29%2C%24%28%22%23push%22%29.click%28%28function%28%29%7Bvar%20e%3D%24%28%22%23editUrl%22%29.val%28%29%2Cn%3D%24%28%22%23editText%22%29.val%28%29%3Bt%28%22push%20%22%2Be%29%3Bvar%20o%3DDate.now%28%29%3Bdb.zero.put%28%7Burl%3Ae%2Ctimestamp%3Ao%2Cdata%3An%7D%29%2Cd%28%7Bop%3A%22update%22%2Curl%3Ae%2Ctimestamp%3Ao%2Cdata%3An%7D%29%7D%29%29%2C%5B%22connections%22%2C%22peers%22%2C%22log%22%2C%22db%22%2C%22underhood%22%5D%29%29%24%28%22%23%22%2Bn%2B%22Button%22%29.click%28function%28e%29%7Breturn%28%29%3D%3E%7Bvar%20n%3D%24%28%22%23%22%2Be%29%5B0%5D%3B%22none%22%3D%3Dn.style.display%3Fn.style.display%3D%22block%22%3An.style.display%3D%22none%22%7D%7D%28n%29%29%3B%24%28%22%23connectToPeer%22%29.click%28%28%28%29%3D%3E%7Bt%28%22connect%22%29%2Cm%28%24%28%22%23remotePeer%22%29.val%28%29%29%7D%29%29%2Ca%28window.mainUrl%29%7Dfunction%20x%28e%2Cn%29%7Bvar%20t%3Ddocument.createElement%28%22script%22%29%3Bt.src%3De%2Ct.onload%3Dn%2Cdocument.documentElement.getElementsByTagName%28%22head%22%29%5B0%5D.appendChild%28t%29%7Dwindow.rawjsInitInterface%3D%28%29%3D%3E%7Bwindow.notificationEnabled%3D%211%2Cwindow.postNodes%3D%7B%7D%2Cwindow.mainUrl%3D%22https%3A//news.doxajournal.ru%22%2Cwindow.trackersReadOnly%3D%5B%22https%3A//zeronet.kaef.top/1EQ6gh2eV2crfxEGzmxMk8DHxULuSYyh4N/conns.txt%22%5D%2Cwindow.trackersInside%3D%5B%22/1EQ6gh2eV2crfxEGzmxMk8DHxULuSYyh4N/conns.txt%22%5D%2Cwindow.subscribed%3D%5B%5D%3Bvar%20e%3Dnew%20Dexie%28%22riza%22%29%3Be.version%282%29.stores%28%7Bzero%3A%22url%2C%20timestamp%2C%20data%22%7D%29%2Ce.version%285%29.stores%28%7B%7D%29%2Cwindow.db%3De%2Ce.open%28%29%2Ce.on%28%22changes%22%2C%28async%20e%3D%3E%7Bfor%28var%20n%20of%28t%28%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%22%29%2Ct%28%22CHANGES%22%29%2Ct%28e%29%2Ce%29%29await%20g%28n%29%7D%29%29%2Cwindow.peers%3D%5B%5D%3Bvar%20n%3D%24%28%22%23connectionList%22%29%5B0%5D%3Bfor%28n.innerHTML%3D%22%22%2Ci%3D0%3Bi%3C8%3B%2B%2Bi%29%7Bvar%20o%3Dw%28%29%3Bo.on%28%22open%22%2Cfunction%28e%29%7Breturn%20o%3D%3E%7Bt%28o%29%2Cdv%3Ddocument.createElement%28%22div%22%29%2Ctxt%3Ddocument.createTextNode%28o%29%2Cdv.appendChild%28txt%29%2Cn.appendChild%28dv%29%2Ce.dom%3Ddv%2Cb%28o%29%7D%7D%28o%29%29%2Co.on%28%22connection%22%2Cfunction%28n%29%7Breturn%20async%20o%3D%3E%7Bt%28o%29%2Co.on%28%22data%22%2Cl%28e%2Cn%29%29%2Cn.connection%3Do%2Cn.dom.remove%28%29%2C%24%28%22%23peerList%22%29%5B0%5D.appendChild%28n.dom%29%2Cf%28n.id%29%2Cs%28n%29%2Cc%28n%29%7D%7D%28o%29%29%7Dfor%28tracker%20of%20window.trackersInside%29a%28tracker%29%3Bfor%28tracker%20of%20window.trackersReadOnly%29u%28tracker%29%3Bk%28%29%7D%2Cwindow.buildBasicDom%3D%28%29%3D%3E%7Bx%28%22https%3A//code.jquery.com/jquery-3.6.0.min.js%22%2C%28%28%29%3D%3E%7Bconsole.log%28%22loaded%20query%22%29%2Cx%28%22https%3A//unpkg.com/peerjs%401.3.2/dist/peerjs.min.js%22%2C%28%28%29%3D%3E%7Bconsole.log%28%22loaded%20peerjs%22%29%2Cx%28%22https%3A//unpkg.com/dexie%403.2.1/dist/dexie.min.js%22%2C%28%28%29%3D%3E%7Bconsole.log%28%22loaded%20dexi%22%29%2Cx%28%22https%3A//unpkg.com/dexie-observable%403.0.0-beta.11/dist/dexie-observable.min.js%22%2Cwindow.afterDom%29%7D%29%29%7D%29%29%7D%29%29%2C%28window.rizaMirrorKeep%3Fdocument.getElementById%28%22riza-mirror%22%29%3Adocument.getElementsByTagName%28%22body%22%29%5B0%5D%29.innerHTML%3D%27%5Cn%20%20%20%20%3Cdiv%20id%3D%22header%22%20style%3D%22width%3A100%25%3Bposition%3Afixed%3Bz-index%3A999%3Bbackground-color%3A%23000C%3B%22%3E%3Ch1%3Econtent%20below%20is%20a%20mirror%20delivered%20through%20peer%20to%20peer%20network%3C/h1%3E%3C/div%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22content%22%3E%3C/div%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22underhood%22%20style%3D%22display%3A%20none%3B%22%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22connectionsButton%22%3Eopen%20connections%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22connections%22%3E%5Cn%20%20%20%20%20%20copy%20connection%20id%20%26amp%3B%20send%20it%20to%20your%20friends%5Cn%20%20%20%20%20%20%3Cdiv%20id%3D%22connectionList%22%3E%3C/div%3E%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22peersButton%22%3Epeers%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22peers%22%3E%5Cn%20%20%20%20%20%20peer%20list%20go%20here%5Cn%20%20%20%20%20%20%3Cdiv%20id%3D%22peerList%22%3E%3C/div%3E%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22logButton%22%3Elog%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22log%22%3E%5Cn%20%20%20%20%20%20connection%20log%20goes%20here%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22dbButton%22%3Edb%3C/button%3E%5Cn%20%20%20%20%3Cdiv%20id%3D%22db%22%3E%5Cn%20%20%20%20%20%20db%20goes%20here%5Cn%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3Cinput%20id%3D%22remotePeer%22%20type%3D%22text%22/%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22connectToPeer%22%3Econnect%3C/button%3E%5Cn%20%20%20%20%3Cinput%20id%3D%22editUrl%22%20type%3D%22text%22/%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22update%22%3Eload%3C/button%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22subscribe%22%3Esubscribe%3C/button%3E%5Cn%20%20%20%20%3Ctextarea%20id%3D%22editText%22%3E%3C/textarea%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22editDone%22%3Eupdate%3C/button%3E%5Cn%20%20%20%20%3Cbutton%20id%3D%22push%22%3Epush%3C/button%3E%5Cn%20%20%20%20%3C/div%3E%5Cn%27%2Cdocument.title%3D%22riza-mirror%22%7D%2Cwindow.onload%3D%28%29%3D%3E%7Bconsole.log%28%22helloworld%22%29%2Cwindow.buildBasicDom%28%29%7D%2Cwindow.afterDom%3D%28%29%3D%3E%7BrawjsInitInterface%28%29%2Ct%28%22inited%22%29%2Cwindow.db.zero.get%28window.mainUrl%29.then%28%28e%3D%3E%7Bt%28%22setting%20innerHTML%22%29%2C%24%28%22%23content%22%29%5B0%5D.innerHTML%3De.data%7D%29%29%2Ct%28%22onload%20finished%21%22%29%7D%2Cwindow.onload%28%29%7D%29%28%29%3B%0A</textarea>
      <p>Теперь, когда у вас есть закладка, вы можете получить доступ к riza, зайдя на сторонний сайт (например, google.com; однако некоторые сайты не подходят) и активизиров закладку (на данный момент riza не сможет работать в пустой вкладке!)</p>
      <p>riza-mirror не работает в tor browser. если вы готовы устанавливать сторонние приложения, вы сможете воспользоваться полноценной версией riza. также могут помешать работе некоторые расширения для приватности и настройки браузера</p>
    </div>
    <div id="riza-mirror"></div>
    <script>window.rizaMirrorKeep=true;document.getElementById('link').click()</script>
  </body>
</html>
